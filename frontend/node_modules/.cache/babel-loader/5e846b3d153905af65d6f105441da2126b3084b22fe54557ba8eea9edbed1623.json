{"ast":null,"code":"import React,{useContext,useState}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const BASE_URL=\"http://localhost:5000\";const GlobalContext=/*#__PURE__*/React.createContext();export const GlobalProvider=_ref=>{let{children}=_ref;const[incomes,setIncomes]=useState([]);const[expenses,setExpenses]=useState([]);const[error,setError]=useState(null);//calculate incomes\nconst addIncome=async income=>{const response=await axios.post(\"\".concat(BASE_URL,\"/api/add-income\"),income).catch(err=>{setError(err.response.data.message);});getIncomes();};const getIncomes=async()=>{const response=await axios.get(\"\".concat(BASE_URL,\"/api/get-incomes\"));setIncomes(response.data);console.log(response.data);};const deleteIncome=async id=>{const res=await axios.delete(\"\".concat(BASE_URL,\"/api/delete-income/\").concat(id));getIncomes();};const totalIncome=()=>{let totalIncome=0;incomes.forEach(income=>{totalIncome=totalIncome+income.amount;});return totalIncome;};//calculate incomes\nconst addExpense=async income=>{const response=await axios.post(\"\".concat(BASE_URL,\"/api/add-expense\"),income).catch(err=>{setError(err.response.data.message);});getExpenses();};const getExpenses=async()=>{const response=await axios.get(\"\".concat(BASE_URL,\"/api/get-expenses\"));setExpenses(response.data);console.log(response.data);};const deleteExpense=async id=>{const res=await axios.delete(\"\".concat(BASE_URL,\"/api/delete-expense/\").concat(id));getExpenses();};const totalExpenses=()=>{let totalIncome=0;expenses.forEach(income=>{totalIncome=totalIncome+income.amount;});return totalIncome;};const totalBalance=()=>{return totalIncome()-totalExpenses();};const transactionHistory=()=>{const history=[...incomes,...expenses];history.sort((a,b)=>{return new Date(b.createdAt)-new Date(a.createdAt);});return history.slice(0,4);};//TODO ADD DAILY, MONTHLY AND YEARLY\nreturn/*#__PURE__*/_jsx(GlobalContext.Provider,{value:{addIncome,getIncomes,incomes,deleteIncome,expenses,totalIncome,addExpense,getExpenses,deleteExpense,totalExpenses,totalBalance,transactionHistory,error,setError},children:children});};export const useGlobalContext=()=>{return useContext(GlobalContext);};","map":{"version":3,"names":["React","useContext","useState","axios","BASE_URL","GlobalContext","createContext","GlobalProvider","children","incomes","setIncomes","expenses","setExpenses","error","setError","addIncome","income","response","post","catch","err","data","message","getIncomes","get","console","log","deleteIncome","id","res","delete","totalIncome","forEach","amount","addExpense","getExpenses","deleteExpense","totalExpenses","totalBalance","transactionHistory","history","sort","a","b","Date","createdAt","slice","useGlobalContext"],"sources":["D:/A PROJECT/AA Sudah Jadi/money-tracker-docker/frontend/src/context/globalContext.js"],"sourcesContent":["import React, { useContext, useState } from \"react\"\r\nimport axios from 'axios'\r\n\r\nconst BASE_URL = \"http://localhost:5000\";\r\n\r\nconst GlobalContext = React.createContext()\r\n\r\nexport const GlobalProvider = ({children}) => {\r\n\r\n    const [incomes, setIncomes] = useState([])\r\n    const [expenses, setExpenses] = useState([])\r\n    const [error, setError] = useState(null)\r\n\r\n    //calculate incomes\r\n    const addIncome = async (income) => {\r\n        const response = await axios.post(`${BASE_URL}/api/add-income`, income)\r\n            .catch((err) =>{\r\n                setError(err.response.data.message)\r\n            })\r\n        getIncomes()\r\n    }\r\n\r\n    const getIncomes = async () => {\r\n        const response = await axios.get(`${BASE_URL}/api/get-incomes`)\r\n        setIncomes(response.data)\r\n        console.log(response.data)\r\n    }\r\n\r\n    const deleteIncome = async (id) => {\r\n        const res  = await axios.delete(`${BASE_URL}/api/delete-income/${id}`)\r\n        getIncomes()\r\n    }\r\n\r\n    const totalIncome = () => {\r\n        let totalIncome = 0;\r\n        incomes.forEach((income) =>{\r\n            totalIncome = totalIncome + income.amount\r\n        })\r\n\r\n        return totalIncome;\r\n    }\r\n\r\n\r\n    //calculate incomes\r\n    const addExpense = async (income) => {\r\n        const response = await axios.post(`${BASE_URL}/api/add-expense`, income)\r\n            .catch((err) =>{\r\n                setError(err.response.data.message)\r\n            })\r\n        getExpenses()\r\n    }\r\n\r\n    const getExpenses = async () => {\r\n        const response = await axios.get(`${BASE_URL}/api/get-expenses`)\r\n        setExpenses(response.data)\r\n        console.log(response.data)\r\n    }\r\n\r\n    const deleteExpense = async (id) => {\r\n        const res  = await axios.delete(`${BASE_URL}/api/delete-expense/${id}`)\r\n        getExpenses()\r\n    }\r\n\r\n    const totalExpenses = () => {\r\n        let totalIncome = 0;\r\n        expenses.forEach((income) =>{\r\n            totalIncome = totalIncome + income.amount\r\n        })\r\n\r\n        return totalIncome;\r\n    }\r\n\r\n\r\n    const totalBalance = () => {\r\n        return totalIncome() - totalExpenses()\r\n    }\r\n\r\n    const transactionHistory = () => {\r\n        const history = [...incomes, ...expenses]\r\n        history.sort((a, b) => {\r\n            return new Date(b.createdAt) - new Date(a.createdAt)\r\n        })\r\n\r\n        return history.slice(0, 4)\r\n    }\r\n\r\n//TODO ADD DAILY, MONTHLY AND YEARLY\r\n    return (\r\n        <GlobalContext.Provider value={{\r\n            addIncome,\r\n            getIncomes,\r\n            incomes,\r\n            deleteIncome,\r\n            expenses,\r\n            totalIncome,\r\n            addExpense,\r\n            getExpenses,\r\n            deleteExpense,\r\n            totalExpenses,\r\n            totalBalance,\r\n            transactionHistory,\r\n            error,\r\n            setError\r\n        }}>\r\n            {children}\r\n        </GlobalContext.Provider>\r\n    )\r\n}\r\n\r\nexport const useGlobalContext = () =>{\r\n    return useContext(GlobalContext)\r\n}"],"mappings":"AAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CACnD,MAAOC,MAAK,KAAM,OAAO,4CAEzB,KAAMC,SAAQ,CAAG,uBAAuB,CAExC,KAAMC,cAAa,cAAGL,KAAK,CAACM,aAAa,EAAE,CAE3C,MAAO,MAAMC,eAAc,CAAG,MAAgB,IAAf,CAACC,QAAQ,CAAC,MAErC,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACS,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAExC;AACA,KAAMa,UAAS,CAAG,KAAOC,OAAM,EAAK,CAChC,KAAMC,SAAQ,CAAG,KAAMd,MAAK,CAACe,IAAI,WAAId,QAAQ,oBAAmBY,MAAM,CAAC,CAClEG,KAAK,CAAEC,GAAG,EAAI,CACXN,QAAQ,CAACM,GAAG,CAACH,QAAQ,CAACI,IAAI,CAACC,OAAO,CAAC,CACvC,CAAC,CAAC,CACNC,UAAU,EAAE,CAChB,CAAC,CAED,KAAMA,WAAU,CAAG,SAAY,CAC3B,KAAMN,SAAQ,CAAG,KAAMd,MAAK,CAACqB,GAAG,WAAIpB,QAAQ,qBAAmB,CAC/DM,UAAU,CAACO,QAAQ,CAACI,IAAI,CAAC,CACzBI,OAAO,CAACC,GAAG,CAACT,QAAQ,CAACI,IAAI,CAAC,CAC9B,CAAC,CAED,KAAMM,aAAY,CAAG,KAAOC,GAAE,EAAK,CAC/B,KAAMC,IAAG,CAAI,KAAM1B,MAAK,CAAC2B,MAAM,WAAI1B,QAAQ,+BAAsBwB,EAAE,EAAG,CACtEL,UAAU,EAAE,CAChB,CAAC,CAED,KAAMQ,YAAW,CAAG,IAAM,CACtB,GAAIA,YAAW,CAAG,CAAC,CACnBtB,OAAO,CAACuB,OAAO,CAAEhB,MAAM,EAAI,CACvBe,WAAW,CAAGA,WAAW,CAAGf,MAAM,CAACiB,MAAM,CAC7C,CAAC,CAAC,CAEF,MAAOF,YAAW,CACtB,CAAC,CAGD;AACA,KAAMG,WAAU,CAAG,KAAOlB,OAAM,EAAK,CACjC,KAAMC,SAAQ,CAAG,KAAMd,MAAK,CAACe,IAAI,WAAId,QAAQ,qBAAoBY,MAAM,CAAC,CACnEG,KAAK,CAAEC,GAAG,EAAI,CACXN,QAAQ,CAACM,GAAG,CAACH,QAAQ,CAACI,IAAI,CAACC,OAAO,CAAC,CACvC,CAAC,CAAC,CACNa,WAAW,EAAE,CACjB,CAAC,CAED,KAAMA,YAAW,CAAG,SAAY,CAC5B,KAAMlB,SAAQ,CAAG,KAAMd,MAAK,CAACqB,GAAG,WAAIpB,QAAQ,sBAAoB,CAChEQ,WAAW,CAACK,QAAQ,CAACI,IAAI,CAAC,CAC1BI,OAAO,CAACC,GAAG,CAACT,QAAQ,CAACI,IAAI,CAAC,CAC9B,CAAC,CAED,KAAMe,cAAa,CAAG,KAAOR,GAAE,EAAK,CAChC,KAAMC,IAAG,CAAI,KAAM1B,MAAK,CAAC2B,MAAM,WAAI1B,QAAQ,gCAAuBwB,EAAE,EAAG,CACvEO,WAAW,EAAE,CACjB,CAAC,CAED,KAAME,cAAa,CAAG,IAAM,CACxB,GAAIN,YAAW,CAAG,CAAC,CACnBpB,QAAQ,CAACqB,OAAO,CAAEhB,MAAM,EAAI,CACxBe,WAAW,CAAGA,WAAW,CAAGf,MAAM,CAACiB,MAAM,CAC7C,CAAC,CAAC,CAEF,MAAOF,YAAW,CACtB,CAAC,CAGD,KAAMO,aAAY,CAAG,IAAM,CACvB,MAAOP,YAAW,EAAE,CAAGM,aAAa,EAAE,CAC1C,CAAC,CAED,KAAME,mBAAkB,CAAG,IAAM,CAC7B,KAAMC,QAAO,CAAG,CAAC,GAAG/B,OAAO,CAAE,GAAGE,QAAQ,CAAC,CACzC6B,OAAO,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CACnB,MAAO,IAAIC,KAAI,CAACD,CAAC,CAACE,SAAS,CAAC,CAAG,GAAID,KAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CACxD,CAAC,CAAC,CAEF,MAAOL,QAAO,CAACM,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAC9B,CAAC,CAEL;AACI,mBACI,KAAC,aAAa,CAAC,QAAQ,EAAC,KAAK,CAAE,CAC3B/B,SAAS,CACTQ,UAAU,CACVd,OAAO,CACPkB,YAAY,CACZhB,QAAQ,CACRoB,WAAW,CACXG,UAAU,CACVC,WAAW,CACXC,aAAa,CACbC,aAAa,CACbC,YAAY,CACZC,kBAAkB,CAClB1B,KAAK,CACLC,QACJ,CAAE,UACGN,QAAQ,EACY,CAEjC,CAAC,CAED,MAAO,MAAMuC,iBAAgB,CAAG,IAAK,CACjC,MAAO9C,WAAU,CAACI,aAAa,CAAC,CACpC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}